<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard MotorControl</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="icon" type="image/x-icon" href="img/FAVICON(1).ico">
    <link rel="icon" type="image/png" sizes="32x32" href="img/FAVICON(1).ico">
    <link rel="icon" type="image/png" sizes="16x16" href="img/FAVICON(1).ico">
    <style>
        body {
            background-color: #191923;
            overflow-x: hidden;
        }

        /* Efeito de vidro para todos os elementos */
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .glass-input {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
        }

        .glass-input:focus {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(14, 121, 178, 0.5);
            outline: none;
            box-shadow: 0 0 0 3px rgba(14, 121, 178, 0.1);
        }

        /* Header com efeito de vidro */
        .header {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Imagem de fundo no canto direito inferior */
        .background-image {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 90vw;
            height: auto;
            opacity: 0.7;
            z-index: -1;
            object-fit: cover;
            pointer-events: none;
        }

        /* Sidebar */
        .sidebar {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(15px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-item {
            transition: all 0.3s ease;
        }

        .sidebar-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .sidebar-item.active {
            background: rgba(14, 121, 178, 0.2);
            border-left: 4px solid #0E79B2;
        }

        /* Animações */
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Loading */
        .loading {
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid #0E79B2;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Modal */
        .modal-backdrop {
            backdrop-filter: blur(10px);
        }

        /* Status badges */
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-ativo {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .status-alugado {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
        }

        .status-estacionamento {
            background: rgba(156, 163, 175, 0.2);
            color: #9ca3af;
        }

        .status-problemas {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .status-pendente {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        .status-pago {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .status-finalizado {
            background: rgba(107, 114, 128, 0.2);
            color: #6b7280;
        }

        /* Tables */
        .table-container {
            max-height: 500px;
            overflow-y: auto;
        }

        .table-container::-webkit-scrollbar {
            width: 6px;
        }

        .table-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .table-container::-webkit-scrollbar-thumb {
            background: rgba(14, 121, 178, 0.5);
            border-radius: 3px;
        }

        

        /* Loading spinner para logout */
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top: 4px solid #0E79B2;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }

        /* Animação de slide up */
        .slide-up {
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Animação de fade out */
        .fade-out {
            animation: fadeOut 0.5s ease-in;
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }

            to {
                opacity: 0;
            }
        }

        /* Success message */
        .success-message {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.3);
            color: #22c55e;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 16px;
            animation: slideUp 0.3s ease-out;
        }

        /* Error message */
        .error-message {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #ef4444;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 16px;
            animation: slideUp 0.3s ease-out;
        }
    </style>
</head>

<body class="min-h-screen text-white">

    <img src="img/Gradient.png" alt="" class="background-image flex items-end">

    <!-- Header -->
    <header class="header fixed top-0 left-0 right-0 z-50 p-4">
        <div class="flex justify-between items-center">
            <!-- Logo -->
            <div class="flex items-center space-x-4">
                <div class="w-15 h-15 rounded-lg flex items-center justify-center">
                    <a>IA Service Desk</a>
                </div>
            </div>

            <!-- User info e logout -->
            <div class="flex items-center space-x-4">
                
                <span class="text-gray-300">Bem-vindo, <span id="userName" class="font-semibold">Técnico</span></span>
                <button id="logoutBtn"
                    class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg transition-all duration-200 flex items-center space-x-2">
                    <a id="logoutText" href="index.html">Sair</a>
                    <div id="logoutSpinner" class="loading hidden"></div>
                </button>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <nav class="sidebar fixed left-0 top-16 h-full w-64 p-4 z-40">
        <div class="space-y-2 mt-4">
            <button class="sidebar-item active w-full text-left px-4 py-3 rounded-lg flex items-center space-x-3"
                data-section="dashboard">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path
                        d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z">
                    </path>
                </svg>
                <span>Dashboard</span>
            </button>

            <button class="sidebar-item w-full text-left px-4 py-3 rounded-lg flex items-center space-x-3"
                data-section="clientes">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path
                        d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z">
                    </path>
                </svg>
                <span>Clientes</span>
            </button>



            <button class="sidebar-item w-full text-left px-4 py-3 rounded-lg flex items-center space-x-3"
                data-section="infracoes">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd"
                        d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
                        clip-rule="evenodd"></path>
                </svg>
                <span>Documentação</span>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="ml-64 mt-16 p-6">
        <!-- Mensagens de Feedback -->
        <div id="messageContainer"></div>

        <!-- Dashboard Section -->
        <div id="dashboard-section" class="section">
            <div class="glass rounded-2xl p-8 mb-8 fade-in">


                <div class="p-6">
                    <h1 class="text-3xl font-bold mb-6">Dashboard de Chamados</h1>

                    <!-- Cards de status -->
                    <div class="grid grid-cols-4 gap-6 mb-8">
                        <div class="bg-blue-600 text-white rounded-xl p-4 shadow-md flex flex-col items-center">
                            <span class="text-lg font-bold">Total Chamados</span>
                            <span id="total-chamados" class="text-3xl mt-2">0</span>
                        </div>
                        <div class="bg-yellow-500 text-white rounded-xl p-4 shadow-md flex flex-col items-center">
                            <span class="text-lg font-bold">Em Andamento</span>
                            <span id="chamados-andamento" class="text-3xl mt-2">0</span>
                        </div>
                        <div class="bg-green-600 text-white rounded-xl p-4 shadow-md flex flex-col items-center">
                            <span class="text-lg font-bold">Resolvidos</span>
                            <span id="chamados-resolvidos" class="text-3xl mt-2">0</span>
                        </div>
                        <div class="bg-red-600 text-white rounded-xl p-4 shadow-md flex flex-col items-center">
                            <span class="text-lg font-bold">Com Problemas</span>
                            <span id="chamados-problemas" class="text-3xl mt-2">0</span>
                        </div>
                    </div>


                </div>


                <!-- Ações Rápidas -->
                <div class="glass rounded-xl p-6">
                    <!-- Ações rápidas -->
                    <h2 class="text-xl font-semibold mb-4">Ações Rápidas</h2>
                    <div class="flex gap-4">
                        <a href="pre_chamado.html"
                            class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg shadow-md font-bold">Novo
                            Chamado</a>
                        <a href="#"
                            class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg shadow-md font-bold">Atender
                            Chamados</a>
                        <a href="#"
                            class="bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg shadow-md font-bold">Histórico</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Clientes Section -->
        <div id="clientes-section" class="section hidden">
            <div class="glass rounded-2xl p-8 fade-in">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold">Gestão de Clientes</h2>
                    <button onclick="CRMApp.openClienteModal()"
                        class="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg transition-all duration-200">
                        + Novo Cliente
                    </button>
                </div>

                <div class="table-container">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-gray-600">
                                <th class="text-left p-3">Nome</th>
                                <th class="text-left p-3">CPF/RG</th>
                                <th class="text-left p-3">Plano</th>
                                <th class="text-left p-3">Status</th>
                                <th class="text-left p-3">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="clientesTableBody">
                            <!-- Dados serão carregados aqui -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Veículos Section -->
        <div id="veiculos-section" class="section hidden">
            <div class="glass rounded-2xl p-8 fade-in">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold">Gestão de Veículos</h2>
                    <button onclick="CRMApp.openVeiculoModal()"
                        class="bg-green-600 hover:bg-green-700 px-6 py-2 rounded-lg transition-all duration-200">
                        + Novo Veículo
                    </button>
                </div>

                <div class="table-container">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-gray-600">
                                <th class="text-left p-3">Marca/Modelo</th>
                                <th class="text-left p-3">Ano</th>
                                <th class="text-left p-3">Placa</th>
                                <th class="text-left p-3">Status</th>
                                <th class="text-left p-3">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="veiculosTableBody">
                            <!-- Dados serão carregados aqui -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Aluguéis Section -->
        <div id="alugueis-section" class="section hidden">
            <div class="glass rounded-2xl p-8 fade-in">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold">Gestão de Aluguéis</h2>
                    <button onclick="CRMApp.openAluguelModal()"
                        class="bg-purple-600 hover:bg-purple-700 px-6 py-2 rounded-lg transition-all duration-200">
                        + Novo Aluguel
                    </button>
                </div>

                <div class="table-container">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-gray-600">
                                <th class="text-left p-3">Cliente</th>
                                <th class="text-left p-3">Veículo</th>
                                <th class="text-left p-3">Data Início</th>
                                <th class="text-left p-3">Data Fim</th>
                                <th class="text-left p-3">Valor</th>
                                <th class="text-left p-3">Status</th>
                                <th class="text-left p-3">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="alugueisTableBody">
                            <!-- Dados serão carregados aqui -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Infrações Section -->
        <div id="infracoes-section" class="section hidden">
            <div class="glass rounded-2xl p-8 fade-in">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold">Gestão de Infrações</h2>
                    <button onclick="CRMApp.openInfracaoModal()"
                        class="bg-orange-600 hover:bg-orange-700 px-6 py-2 rounded-lg transition-all duration-200">
                        + Nova Infração
                    </button>
                </div>

                <div class="table-container">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-gray-600">
                                <th class="text-left p-3">Aluguel</th>
                                <th class="text-left p-3">Tipo</th>
                                <th class="text-left p-3">Data</th>
                                <th class="text-left p-3">Valor</th>
                                <th class="text-left p-3">Status</th>
                                <th class="text-left p-3">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="infracoesTableBody">
                            <!-- Dados serão carregados aqui -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal Cliente -->
    <div id="clienteModal"
        class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop flex items-center justify-center z-50 hidden">
        <div class="glass rounded-2xl p-8 max-w-2xl w-full mx-4 max-h-screen overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold" id="clienteModalTitle">Cadastro de Cliente</h3>
                <button onclick="CRMApp.closeModal('clienteModal')" class="text-gray-400 hover:text-white">✕</button>
            </div>

            <form id="clienteForm" class="space-y-4">
                <input type="hidden" id="clienteId">
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Nome Completo *</label>
                        <input type="text" id="nomeCompleto" class="glass-input w-full px-4 py-2 rounded-lg" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">CPF ou RG *</label>
                        <input type="text" id="rgCpf" class="glass-input w-full px-4 py-2 rounded-lg" required>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Data de Nascimento *</label>
                        <input type="date" id="dataNascimento" class="glass-input w-full px-4 py-2 rounded-lg" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Plano *</label>
                        <select id="plano" class="glass-input w-full px-4 py-2 rounded-lg" required>
                            <option value="">Selecione um plano</option>
                            <option value="Básico">Starter</option>
                            <option value="Premium">Turbo</option>
                            <option value="VIP">Premium</option>
                        </select>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Data de Retirada</label>
                        <input type="date" id="dataRetirada" class="glass-input w-full px-4 py-2 rounded-lg">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Data de Devolução</label>
                        <input type="date" id="dataDevolucao" class="glass-input w-full px-4 py-2 rounded-lg">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium mb-2">Forma de Pagamento *</label>
                    <select id="formaPagamento" class="glass-input w-full px-4 py-2 rounded-lg" required>
                        <option value="">Selecione a forma de pagamento</option>
                        <option value="Cartão de Crédito">Cartão de Crédito</option>
                        <option value="Cartão de Débito">Cartão de Débito</option>
                        <option value="PIX">PIX</option>
                        <option value="Dinheiro">Dinheiro</option>
                        <option value="Transferência">Transferência Bancária</option>
                    </select>
                </div>

                <div class="flex justify-end space-x-4 pt-4">
                    <button type="button" onclick="CRMApp.closeModal('clienteModal')"
                        class="bg-gray-600 hover:bg-gray-700 px-6 py-2 rounded-lg">
                        Cancelar
                    </button>
                    <button type="submit"
                        class="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg flex items-center space-x-2">
                        <span id="clienteSubmitText">Salvar Cliente</span>
                        <div id="clienteSubmitSpinner" class="loading hidden"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Veículo -->
    <div id="veiculoModal"
        class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop flex items-center justify-center z-50 hidden">
        <div class="glass rounded-2xl p-8 max-w-2xl w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold" id="veiculoModalTitle">Cadastro de Veículo</h3>
                <button onclick="CRMApp.closeModal('veiculoModal')" class="text-gray-400 hover:text-white">✕</button>
            </div>

            <form id="veiculoForm" class="space-y-4">
                <input type="hidden" id="veiculoId">
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Marca *</label>
                        <input type="text" id="marca" class="glass-input w-full px-4 py-2 rounded-lg" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Modelo *</label>
                        <input type="text" id="modelo" class="glass-input w-full px-4 py-2 rounded-lg" required>
                    </div>
                </div>

                <div class="grid md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Ano *</label>
                        <input type="number" id="ano" min="1990" max="2025"
                            class="glass-input w-full px-4 py-2 rounded-lg" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Placa *</label>
                        <input type="text" id="placa" class="glass-input w-full px-4 py-2 rounded-lg" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Cor *</label>
                        <input type="text" id="cor" class="glass-input w-full px-4 py-2 rounded-lg" required>
                    </div>
                </div>

                <div class="flex justify-end space-x-4 pt-4">
                    <button type="button" onclick="CRMApp.closeModal('veiculoModal')"
                        class="bg-gray-600 hover:bg-gray-700 px-6 py-2 rounded-lg">
                        Cancelar
                    </button>
                    <button type="submit"
                        class="bg-green-600 hover:bg-green-700 px-6 py-2 rounded-lg flex items-center space-x-2">
                        <span id="veiculoSubmitText">Salvar Veículo</span>
                        <div id="veiculoSubmitSpinner" class="loading hidden"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Aluguel -->
    <div id="aluguelModal"
        class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop flex items-center justify-center z-50 hidden">
        <div class="glass rounded-2xl p-8 max-w-2xl w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold" id="aluguelModalTitle">Novo Aluguel</h3>
                <button onclick="CRMApp.closeModal('aluguelModal')" class="text-gray-400 hover:text-white">✕</button>
            </div>

            <form id="aluguelForm" class="space-y-4">
                <input type="hidden" id="aluguelId">
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Cliente *</label>
                        <select id="clienteSelect" class="glass-input w-full px-4 py-2 rounded-lg" required>
                            <option value="">Selecione um cliente</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Veículo *</label>
                        <select id="veiculoSelect" class="glass-input w-full px-4 py-2 rounded-lg" required>
                            <option value="">Selecione um veículo</option>
                        </select>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Data Início *</label>
                        <input type="date" id="dataInicio" class="glass-input w-full px-4 py-2 rounded-lg" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Data Fim *</label>
                        <input type="date" id="dataFim" class="glass-input w-full px-4 py-2 rounded-lg" required>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium mb-2">Valor Total *</label>
                    <input type="number" step="0.01" id="valorTotal" class="glass-input w-full px-4 py-2 rounded-lg"
                        required>
                </div>

                <div class="flex justify-end space-x-4 pt-4">
                    <button type="button" onclick="CRMApp.closeModal('aluguelModal')"
                        class="bg-gray-600 hover:bg-gray-700 px-6 py-2 rounded-lg">
                        Cancelar
                    </button>
                    <button type="submit"
                        class="bg-purple-600 hover:bg-purple-700 px-6 py-2 rounded-lg flex items-center space-x-2">
                        <span id="aluguelSubmitText">Confirmar Aluguel</span>
                        <div id="aluguelSubmitSpinner" class="loading hidden"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Infração -->
    <div id="infracaoModal"
        class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop flex items-center justify-center z-50 hidden">
        <div class="glass rounded-2xl p-8 max-w-2xl w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">Registrar Infração</h3>
                <button onclick="CRMApp.closeModal('infracaoModal')" class="text-gray-400 hover:text-white">✕</button>
            </div>

            <form id="infracaoForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2">Aluguel Ativo *</label>
                    <select id="aluguelSelect" class="glass-input w-full px-4 py-2 rounded-lg" required>
                        <option value="">Selecione um aluguel ativo</option>
                    </select>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Tipo de Infração *</label>
                        <select id="tipoInfracao" class="glass-input w-full px-4 py-2 rounded-lg" required>
                            <option value="">Selecione o tipo</option>
                            <option value="Excesso de Velocidade">Excesso de Velocidade</option>
                            <option value="Estacionamento Irregular">Estacionamento Irregular</option>
                            <option value="Semáforo Vermelho">Avançar Semáforo Vermelho</option>
                            <option value="Falta de Cinto">Falta de Cinto de Segurança</option>
                            <option value="Celular ao Volante">Uso de Celular ao Volante</option>
                            <option value="Outros">Outros</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Data da Infração *</label>
                        <input type="date" id="dataInfracao" class="glass-input w-full px-4 py-2 rounded-lg" required>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium mb-2">Valor da Multa *</label>
                    <input type="number" step="0.01" id="valorInfracao" class="glass-input w-full px-4 py-2 rounded-lg"
                        required>
                </div>

                <div>
                    <label class="block text-sm font-medium mb-2">Descrição</label>
                    <textarea id="descricaoInfracao" rows="3"
                        class="glass-input w-full px-4 py-2 rounded-lg"></textarea>
                </div>

                <div class="flex justify-end space-x-4 pt-4">
                    <button type="button" onclick="CRMApp.closeModal('infracaoModal')"
                        class="bg-gray-600 hover:bg-gray-700 px-6 py-2 rounded-lg">
                        Cancelar
                    </button>
                    <button type="submit"
                        class="bg-orange-600 hover:bg-orange-700 px-6 py-2 rounded-lg flex items-center space-x-2">
                        <span id="infracaoSubmitText">Registrar Infração</span>
                        <div id="infracaoSubmitSpinner" class="loading hidden"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Confirmação -->
    <div id="confirmModal"
        class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop flex items-center justify-center z-50 hidden">
        <div class="glass rounded-2xl p-8 max-w-md w-full mx-4">
            <div class="text-center">
                <h3 class="text-xl font-bold mb-4" id="confirmTitle">Confirmar Ação</h3>
                <p class="text-gray-300 mb-6" id="confirmMessage">Tem certeza que deseja continuar?</p>

                <div class="flex justify-center space-x-4">
                    <button id="confirmCancel" class="bg-gray-600 hover:bg-gray-700 px-6 py-2 rounded-lg">
                        Cancelar
                    </button>
                    <button id="confirmOk" class="bg-red-600 hover:bg-red-700 px-6 py-2 rounded-lg">
                        Confirmar
                    </button>
                </div>
            </div>
        </div>
    </div>

    

    <script>
document.addEventListener("DOMContentLoaded", () => {
  // Recupera os chamados salvos no localStorage
  const chamados = JSON.parse(localStorage.getItem("meus_chamados")) || [];

  // Atualiza os cards
  document.getElementById("total-chamados").innerText = chamados.length;

  document.getElementById("chamados-andamento").innerText = 
    chamados.filter(c => c.status && c.status === "Em andamento").length;

  document.getElementById("chamados-resolvidos").innerText = 
    chamados.filter(c => c.status && c.status === "Resolvido").length;

  document.getElementById("chamados-problemas").innerText = 
    chamados.filter(c => c.status && c.status === "Com Problemas").length;
});
</script>


</body>

</html>